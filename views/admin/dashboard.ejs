<%- include('../partials/header') %>
<%- include('../partials/navbar-admin') %>

<div class="dashboard admin-dashboard">
    <div class="container">
        <div class="dashboard-header">
            <h1>Admin Dashboard</h1>
            <p>Welcome back, <%= adminEmail %></p>
        </div>

        <!-- Stats Overview -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon users">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-content">
                    <h3>Total Users</h3>
                    <p class="stat-value"><%= totalUsers %></p>
                    <p class="stat-label">Registered accounts</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon foods">
                    <i class="fas fa-apple-alt"></i>
                </div>
                <div class="stat-content">
                    <h3>Food Database</h3>
                    <p class="stat-value"><%= totalFoods %></p>
                    <p class="stat-label">Food items</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon contacts">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="stat-content">
                    <h3>New Contacts</h3>
                    <p class="stat-value"><%= totalContacts %></p>
                    <p class="stat-label">Unread messages</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon calories">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-content">
                    <h3>Avg Calories</h3>
                    <p class="stat-value"><%= avgCalories %></p>
                    <p class="stat-label">kcal/user today</p>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="admin-actions">
            <h2>Quick Actions</h2>
            <div class="actions-grid">
                <a href="/admin/users" class="action-card">
                    <i class="fas fa-users-cog"></i>
                    <h3>Manage Users</h3>
                    <p>View and manage user accounts</p>
                </a>
                <a href="/admin/foods" class="action-card">
                    <i class="fas fa-utensils"></i>
                    <h3>Manage Foods</h3>
                    <p>Add or edit food database</p>
                </a>
                <a href="/admin/reports" class="action-card">
                    <i class="fas fa-chart-bar"></i>
                    <h3>View Reports</h3>
                    <p>Analytics and insights</p>
                </a>
                <a href="/admin/contacts" class="action-card">
                    <i class="fas fa-inbox"></i>
                    <h3>Contact Queries</h3>
                    <p>Review user messages</p>
                </a>
            </div>
        </div>

        <!-- Recent Users -->
        <div class="dashboard-card">
            <h2>Recent Users</h2>
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Joined</th>
                            <th>Streak</th>
                            <th>Goal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (recentUsers.length > 0) { %>
                            <% recentUsers.forEach(user => { %>
                                <tr>
                                    <td><%= user.fullName %></td>
                                    <td><%= user.email %></td>
                                    <td><%= new Date(user.createdAt).toLocaleDateString() %></td>
                                    <td><%= user.currentStreak %> days</td>
                                    <td><%= user.calorieGoal %> kcal</td>
                                </tr>
                            <% }); %>
                        <% } else { %>
                            <tr>
                                <td colspan="5" class="text-center">No users yet</td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
            <a href="/admin/users" class="btn-outline">View All Users</a>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>
